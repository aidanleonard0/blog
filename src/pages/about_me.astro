---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import ProjectCard from '@/components/ProjectCard.astro'
import Layout from '@/layouts/Layout.astro'
import { getAllProjects } from '@/lib/data-utils'

import BlogCard from '@/components/BlogCard.astro'
import { getAllAuthors, getPostsByAuthor } from '@/lib/data-utils'
import { Image } from 'astro:assets'
import me from '../assets/me.jpg'

const authors = await getAllAuthors()
const author = authors.find((a) => a.id === 'aidan')

if (!author) {
  throw new Error('Author not found')
}

const projects = await getAllProjects()
const authorPosts = await getPostsByAuthor('aidan')

const favouritePosts = authorPosts.filter((post) => post.data.favourite)
---

<Layout class="max-w-3xl">
  <PageHead slot="head" title="About" />
  <Breadcrumbs items={[{ label: 'about_me', icon: 'lucide:user' }]} />
  <section class="space-y-10">
    <h1 class="text-center text-6xl leading-none font-bold">
      About Me<h1></h1>
      <section class="mt-5 flex flex-col gap-y-4">
        <h2 class="text-3xl font-medium">Aidan Leonard</h2>

        <div class="flex flex-col gap-8 sm:flex-row sm:items-start text-lg text-muted-foreground">
          <div class="flex-1">
            <p>
              Lorem ipsum dolor sit amet consectetur. Fringilla malesuada
              faucibus nisi nec placerat hendrerit aliquet etiam quam. Nunc quis
              ultricies eget mattis vitae imperdiet eu.
            </p>
          </div>

          <div class="flex flex-shrink-0 justify-center sm:justify-end">
            <Image src={me} alt="Profile picture" width={220} height={220} />
          </div>
        </div>
      </section>

      <section class="mt-5 flex flex-col gap-y-4">
        <h2 class="text-3xl font-medium">Education</h2>
        <div class="flex flex-col gap-5 text-muted-foreground">
          <!-- University -->
          <div class="flex flex-col">
            <p class="text-primary text- font-semibold">
              University of East Anglia
            </p>
            <p>BSc (Hons) Computer Science (with Placement) - 2023 - 2027</p>
          </div>

          <!-- Sixth Form -->
          <div class="flex flex-col">
            <p class="text-primary text-lg font-semibold">Tring School</p>

            <div class="space-y-6">
              <div>
                <p><span class="font-bold">A Level</span>: September 2020 – June 2023</p>
                <ul class="list-inside list-disc">
                  <li>Physics, Computer Science BTEC, Media</li>
                </ul>
              </div>

              <div>
                <p><span class="font-bold">GCSE</span>: September 2016 – June 2020</p>
                <ul class="list-inside list-disc">
                  <li>
                    Obtained 10 GCSEs Grades 8 to 6, including Double Science
                    (8/8), Maths (7), and Computer Science (7).
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <section class="mt-5 flex flex-col gap-y-4">
          <h2 class="text-3xl font-medium">My Favourite Posts</h2>
          {
            favouritePosts.length > 0 ? (
              <ul class="flex flex-col gap-4">
                {favouritePosts.map((post) => (
                  <li>
                    <BlogCard entry={post} />
                  </li>
                ))}
              </ul>
            ) : (
              <p class="text-muted-foreground">No favourite posts :(</p>
            )
          }
        </section>
        <section class="mt-2">
          <div class="min-w-full">
            <!-- <div class="prose mb-8">
        <p class="mt-0">

        </p>
      </div> -->
            <h2 class="mb-4 text-3xl font-medium">Cool Projects</h2>
            {
              projects.length > 0 ? (
                <div class="flex flex-col gap-4">
                  {projects.map((project) => (
                    <ProjectCard project={project} />
                  ))}
                </div>
              ) : (
                <p class="text-muted-foreground p-5 text-center text-sm font-thin">
                  Coming soon...
                </p>
              )
            }
          </div>
        </section>
      </section>
    </h1>
  </section>
</Layout>
